<div w-i18n-ns="app.ledger" class="import-content">
    <w-change-language></w-change-language>
    <div class="waves-logo"></div>

    <div class="loader-error-wrapper" ng-if="$ctrl.error">
        <div class="sign-error-icon ledger-icons"></div>

        <h3 class="text-center basic-700" w-i18n="ledger.connectionError"></h3>

        <div class="title-wrapper margin-4 body-2 basic-500">
            <div class="text-center basic-500">
                <span w-i18n="ledger.connectionText"></span>
            </div>
            <div class="text-center basic-500">
                <span w-i18n="ledger.referTo"></span>
                <a href="https://support.ledgerwallet.com/hc/en-us/articles/115005165269-Fix-connection-issues"
                    w-i18n="ledger.article" target="_blank"></a>
            </div>
        </div>

        <w-button class="submit big" has-loader="true" on-click="$ctrl.retryGetUsers()">
            <span w-i18n="ledgerForm.retry"></span>
        </w-button>
        <div class="or margin-2" w-i18n="or"></div>
        <a ui-sref="import" w-i18n="ledgerForm.back"></a>
    </div>

    <div class="import-wrapper margin-3" ng-if="$ctrl.isInit && !$ctrl.error">
        <div class="text-center">
            <div class="headline-1">
                <span w-i18n="ledgerForm.importAccount"></span>
            </div>
            <div class="body-2 basic-500">
                <span w-i18n="ledgerForm.ImportOrSignIn"></span>
                <a ui-sref="signIn" href="/signIn">
                    <span w-i18n="ledgerForm.signIn"></span>
                </a>
                <span w-i18n="ledgerForm.savedOne"></span>
            </div>
            <hr>
        </div>
        <div class="body-2 basic-900" w-i18n="ledgerForm.choose"></div>
        <div class="footnote-1 basic-500" w-i18n="ledgerForm.avatarUnique"></div>
        <div class="step-arrows-wrp">
                <div class="step-left" ng-click="$ctrl.stepLeft()" ng-class="{disabled: $ctrl.disabledLeft}"><div class="icon-left"></div></div>
                <div class="step-right" ng-click="$ctrl.stepRight()" ng-class="{disabled: $ctrl.disabledRight}"><div class="icon-right"></div></div>
        </div>
        <div class="ledger-avatars-list">
            <div class="avatar-wrapper"
                 ng-if="!$ctrl.loading"
                 ng-class="{active: $ctrl.selectedUser === user, disabled: $ctrl.isUserDisable($index)}"
                 ng-repeat="user in $ctrl.visibleUsers track by user.id"
                 ng-click="$ctrl.selectUser(user)">
                 <w-avatar address="user.address"
                          size="49"
                          type="ledger"></w-avatar>
            </div>

            <div class="loader-wrapper" ng-if="$ctrl.loading">
                <w-loader></w-loader>
            </div>
        </div>

        <div class="body-2 basic-900" w-i18n="ledgerForm.address"></div>
        <div class="input-like margin-2">
            <div ng-class="{empty: !$ctrl.selectedUser}" class="address basic-900 mobile-caption-2">
                {{$ctrl.selectedUser.address}}
            </div>
        </div>

        <div class="flex margin-2">
            <w-checkbox-submit ng-model="$ctrl.selectDefault" id="select-default"></w-checkbox-submit>
            <label for="select-default" class="footnote-1 basic-500">
                <span w-i18n="ledgerForm.selectDefault"></span>
            </label>
        </div>
        <div class="margin-2">
            <div class="body-2 basic-900" w-i18n="ledgerForm.name"></div>
            <w-input w-autofocus
                     class="big no-validate no-icon"
                     type="text"
                     maxlength="20"
                     ng-model="$ctrl.name">
            </w-input>
        </div>

        <div class="flex margin-2">
            <w-checkbox-submit ng-model="$ctrl.saveUserData" id="save-user-data"></w-checkbox-submit>
            <label for="save-user-data" class="footnote-1 basic-500">
                <span w-i18n="ledgerForm.saveUserData"></span>
            </label>
        </div>

        <div class="margin-3">
            <w-button disabled="$ctrl.disabledLogin"
                      has-loader="true"
                      class="submit big long" on-click="$ctrl.login()">
                <span w-i18n="ledgerForm.login"></span>
            </w-button>
        </div>
        <div class="or margin-2"><span w-i18n="ledgerForm.or">or</span></div>
        <div class="text-center margin-2">
            <a w-i18n="ledgerForm.back" ui-sref="import"></a>
        </div>
    </div>
</div>
